---
node: transform_parabol
input: {name:"depthscale", type:"int"}
---

```{name:"CODE", type:"text", restrict:"main"}
	float poslen = length( vPosition.xyz );
	vPosition /= -poslen;
	//if (renderpass == 1) vPosition.z *=-1.0;
	vPosition.z += 1.0;
	vPosition.xy /= vPosition.z;
	if (vPosition.z >= 0.01){
		vPosition.z = poslen / $depthscale$;
		vPosition.w = 1.0;
	}
	else {
		vPosition.z = -1.0;
		vPosition.w = -1.0;
	}
 
  vPosition.z = 2.0 * vPosition.z -1.0; 
	v_pos=vPosition;
}
```
